(ns sc.countries
   (:require [clj-http.client :as client]
             [clojure.data.json :as json]
             [crouton.html :as html]
             [cheshire.core :refer :all]
             [quil.core :as q]
             [quil.middleware :as m]
             [clojure.string]
             [sc.core :refer :all]))




;; (defn httpCall
;;   [url]
;;   (client/get url))

;; (def call ((httpCall "https://developers.google.com/public-data/docs/canonical/countries_csv") :body))
;; call

;; (def parsed1 ((((((((client/parse-html "https://developers.google.com/public-data/docs/canonical/countries_csv"):content) 1):content) 1):content)3):content))
;; (def parsed2 ((((((((((((parsed1 9):content) 5):content)1) :content)5):content) 1):content) 1):content))



;; (def parsed3 (filterv (fn [x] (not= x " ")) (subvec parsed2 2)))
;; (((((parsed3 0):content) 3) :content)0)

(defn createcountry [c]
  {:country_id ((((c :content) 1) :content)0) :latitude (read-string ((((c :content) 3) :content)0)) :longtitude (read-string ((((c :content) 5) :content)0)) :country_name ((((c :content) 7) :content)0)})


(defn createcountry2 [c]
   {((((c :content) 7) :content)0) [(read-string ((((c :content) 3) :content)0)) (read-string ((((c :content) 5) :content)0))]  })


;; (def countries_full (into (mapv (fn [c] (createcountry c)) (subvec parsed3 0 226))  (mapv (fn [c] (createcountry c)) (subvec parsed3 227))))

;; (def countries (into (mapv (fn [c] (createcountry2 c)) (subvec parsed3 0 226))  (mapv (fn [c] (createcountry2 c)) (subvec parsed3 227))))

;; (spit "/Users/michal/sc/resources/countries.edn" (with-out-str (pr (reduce conj countries))))
;; (spit "/Users/michal/sc/resources/countries_full.edn" (with-out-str (pr countries_full)))

(def countries (read-string (slurp "/Users/michal/sc/resources/countries.edn")))

countries
(read-string (slurp "/Users/michal/sc/resources/top1000cities.edn"))

(def countriesonmap { "Albania" [632 172], "Andorra" [559 166], "Argentina" [304 503], "Australia" [1107 464], "Austria" [611 144], "Bahamas" [301 211],
                     "Belgium" [574 133], "Bosnia & Herzegovina" [624 160], "Brazil" [347 393], "Britain (UK)" [554 122], "Bulgaria" [652 166], "Canada" [193 95], "Cayman Islands" [294 275] ,"Chile" [274 456],
                     "China" [960 200] , "Christmas Island" [986 389],"Colombia" [252 334],"Croatia" [617 154],"Cyprus" [685 200] ,"Czech Republic" [615 136], "Denmark" [592 108], "Dominican Republic" [266 270],
                     "Ecuador" [229 361], "El Salvador" [189 294], "Estonia" [649 99], "Finland" [649 77], "France" [568 148], "Germany" [597 128], "Greece" [645 182], "Guatemala" [185 284],
                     "Hong Kong" [1005 263], "Hungary" [632 148], "India" [877 251], "Indonesia" [1013 386],"Iran" [770 208],
                     "Ireland" [533 121] ,"Israel" [698 205] ,"Italy" [610 170] ,"Jamaica" [232 270] , "Japan" [1094 193] , "Kazakhstan" [819 142] ,"Korea (South)" [1052 194],
                     "Latvia" [648 106] , "Liberia" [514 325] , "Lithuania" [643 112] ,"Luxembourg" [582 138], "Malaysia" [977 336],"Martinique" [303 291],
                     "Mauritius" [780 446], "Mexico" [145 253] "Montenegro" [630 168] ,"Morocco" [534 210] ,"Mozambique" [710 418] , "Netherlands" [580 124] , "New Zealand" [1234 520], "Nicaragua" [204 295]
                     ,"Norway" [596 81], "Oman" [787 260], "Pakistan" [834 219] ,"Paraguay" [313 449], "Peru" [387 377],"Philippines" [1047 284], "Poland" [630 126] , "Portugal" [525 180],"Puerto Rico" [283 274],
                     "Romania" [651 153],  "Russia" [878 75], "Serbia" [637 163], "Slovakia" [628 141] ,"Slovenia" [613 152],"South Africa" [649 485], "Spain" [542 177] , "Sri Lanka" [886 321], "St Vincent" [304 291],
                     "Sweden" [619 78], "Switzerland" [591 149], "Thailand" [946 258],
                     "Turkey" [693 182], "Ukraine" [676 134],  "United Arab Emirates" [774 250],"United States" [184 178], "Uzbekistan" [800 172], "Venezuela" [285 318]})

(countriesonmap "Poland")

(countries "Luxembourg")
(separatecountries allbojansinfo [] nil 1)
(def bojancountries (subvec (separatecountries allbojansinfo [] nil 1) 1))
bojancountries
(defn country-coordinates [countries country]
  (if (nil? (countries (country 0))) [0 0 0]
    (conj (countries (country 0)) (country 1))))

;; (country-coordinates countries ((separatecountries allbojansinfo [] nil 1) 3))

(usercountries 1763025)


(defn followersonmap [mapofcountries followers acc]
  (if (empty? followers) acc
    (if (= (mapofcountries ((followers 0) 0)) nil) (recur mapofcountries (subvec followers 1) acc)
      (recur mapofcountries (subvec followers 1) (cons (conj (mapofcountries ((followers 0) 0)) ((followers 0) 1)) acc)))))

(def bojan_followers_on_map (followersonmap countriesonmap bojancountries []))
(def wawaonmap (followersonmap countriesonmap  (subvec (separatecountries wawainfo [] nil 1) 1) []))

bojan_followers_on_map

(followersonmap countries bojancountries [])

(defn draw_country [c]
  (let [r (Math/sqrt (* (c 2) 2))]
  (q/ellipse (c 0)  (c 1) r r)))

(defn draw_lines [c ]
  (q/line 630 127  (c 0) (c 1)))


(defn lat-to-y [equator lat scalalat]
  (let [y (int (- equator (* lat scalalat)))]
    (if (<= y 0) 0 y)))

(defn lon-to-x [zero lon scalalon]
  (let [x (int (+ zero (* lon scalalon)))]
    (if (<= x 0) 0 x)))

(lat-to-y 365 85 4.37)
(lon-to-x 560 -122 3.7)


(defn latlon_to_xy [lat lon followers zero equator scalalat scalalon]
  [(lon-to-x zero lon scalalon) (lat-to-y equator lat scalalat) followers])

(def bojan_followers_on_map1 (map (fn [x] (latlon_to_xy (x 0) (x 1) (x 2) 555 366 4.44 4)) (followersonmap countries bojancountries [])))
(def x (first (followersonmap countries bojancountries [])))
bojan_followers_on_map1
;; (map draw_country bojan_followers_on_map)

(defn usermap [user countries]
  (map (fn [x] (latlon_to_xy (x 0) (x 1) (x 2) 555 366 4.44 4)) (followersonmap countries (usercountries user) [])))


 (usermap 1763025 countries)
;; (defn setup []



;;   (q/color-mode :hsb)

;;   (q/stroke 150 200 100))

;; (defn draw []

;;   (q/background 40)

;;   (q/fill 152 100 255)
;;   (doall (map rysujemiasto world100m))

;; (q/fill 120 220 200)
;;   (doall (map rysujemiasto worldhalf1))
;;   (q/fill 60 200 60)

;;   (q/fill 20 160 160)
;;   (doall (map rysujemiasto worldhalf2))

;; )

;; (q/defsketch hello-lines

;;   :title "Miasta PL zolty Belchatow (srodek) i Kobylka (skrajne)"

;;   :size [mapax mapay]

;;   :setup setup

;;   :draw draw )


;; (time (def drawcountries (usermap 107508374 countries)))

(def draw1000 (map (fn [x] (latlon_to_xy (x 0) (x 1) (x 2) 555 366 4.54 4)) (map (fn [x] [(x 1) (x 2) (int (/ (x 3) 10000))]) (read-string (slurp "/Users/michal/sc/resources/top1000cities.edn")))))
(def background (ref nil))   ;; reference to blue background image

draw1000
(defn setup []
  ;; loading two images
  (q/background 10)
  (dosync
   (ref-set background (q/load-image "images/world.gif"))))

(defn draw []

;;   (q/background 303 200 120)


;;   drawing blue background and a snowflake on it
;;   (q/background-image @background 40 10)
;;   (q/image @flake 400 10)

;;     (q/stroke 200 120 255)
;;   (doall (map draw_lines bojan_followers_on_map))
;;     (q/fill 212 210 225)
;;   (doall (map draw_country bojan_followers_on_map))

;;     (q/stroke 120 120 255)
;;   (doall (map draw_lines drawcountries))
    (q/fill 112 210 225)
  (doall (map draw_country draw1000))


  (q/image @background 0 10)

;; (q/save-frame "images/worldpolSC.png")
  )

(q/defsketch practice
  :title "Followers"
  :size [1357 628]
  :setup setup
  :draw draw)


;; (def worldhalf1 (list ["Suigen" 37.0525 127 1242 4314.531859369456] ["Suwon" 37.11669444 127.0001111 1242 4311.497704381344] ["Shantou" 23.03336111 116.0000556 1333 4276.767576910266] ["Stockholm" 59.15275 18 1253 4264.3045445513235] ["Mandalay" 22 96.00275 1208 2978.717527192979] ["Almaty" 43.08333333 76.11666667 1204] ["Khabarovsk" 48 135 578 4505.728680722091] ["Ussuriyskiy" 48.10025 135.0018889 578 4502.844980711825] ["Khabarovsk Vtoroy" 48.10144444 135.0001667 578 4502.685996245162] ["Athens" 37.13608333 23.05275 729 4485.213082563104] ["Poznan" 52.08336111 16.13336111 570 4474.020400311432] ["Changwat Krabi" 8 98.08336111 442 4450.128361056432] ["Wroclaw" 51 17.00275 634 4440.487201062977] ["Skopje" 42 21.08608333 474 4427.027166833306] ["Belgrade" 44.15 20.13338889 1115 4418.93117852817] ["Chonju" 35.15244444 127.0017778 711 4408.352786877482] ["Budapest" 47 19.00275 1708 4408.295191906433] ["Pest" 47 19.00275 1176 4408.295191906433] ["Changwat Surat Thani" 9 99.15002778 991 4401.3202246878045] ["Vladivostok" 43.00275 131.0666667 587 4382.268160946713] ["Taejon" 36.01666667 127.1524444 1475 4377.0242435728005] ["Daejeon" 36.15194444 127.0838889 1475 4364.8246860528125] ["Sanaa" 15.01858333 44.03447222 1778 4361.40463601209] ["Xiamen" 24.13333333 118.0013333 578 4353.257485542818] ["Kwangju" 35.00191667 126.0687778 1416 4340.662048771141] ["Jiaojiang" 28.00252778 121.1013333 470 4340.027542537662] ["Alexandria" 31.01755556 29.08336111 3811 4321.902477594122] ["Krakow (Krakï¿½w)" 50.00275 19.08336111 755 4320.618592861253] ["Seoul" 37.0525 127 10323 4314.531859369456] ["Gdansk" 54.01666667 18.00002778 461 4313.895859983854] ["Uijongbu" 37.06805556 127.0001111 479 4313.802632686076] ["Fuzhou" 26.00027778 119.1337778 1179 4313.785826736208] ["Songnam" 37.1025 127.0018889 1031 4312.312517540588] ["Zhangzhou" 24.00219444 117.1504444 589 4296.02380628202] ["Changwat Chumphon" 10 99.00002778 511 4294.6854162332975] ["Lodz" 51.08333333 19.13336111 768 4292.765453768692] ["Rongcheng" 23.01858333 116.0187778 1001 4279.291556552349] ["Ningbo" 29.03333333 121.0336667 719 4269.808285614671] ["Sofia" 42.00275 23.15002778 1062 4267.1221408536085] ["Da Nang" 16.00002778 108.0515556 752 4265.849614196518] ["Wenzhou" 28.00002778 120.1512222 865 4263.781133811989] ["Chandaburi" 12.08333333 102 547 4251.077826375569] ["Yongkang" 28.03608333 120.0024444 536 4249.52534758614] ["Ansan" 37.15138889 126.1525556 650 4241.823583603547] ["Anyang" 37.05083333 126.0853333 634 4241.159025426347] ["Hamhung" 39.06744444 127.0354444 559 4225.803335470274] ["Gizeh" 30.00027778 31.03441667 2443 4224.047260870836] ["Al Qahirah" 30 31.08333333 7734 4220.105952559804] ["El Mahalla El Kubra" 30.13444444 31.00022222 431 4218.742503707856] ["Jiddah" 21.01688889 39.05002778 2545 4215.308268766833] ["Mecca" 21.08502778 39.15111111 1199 4202.506676352206] ["Shenzhen" 22.01941667 114.0024444 1002 4199.846409852773] ["As Suways" 29.13336111 32.03333333 488 4196.351255881628] ["Jiamusi" 46.15275 130 549 4196.062981251608] ["Hong Kong" 22.10275 114 7012 4193.3559157706695] ["Mudanjiang" 44.06941667 129.0833333 665 4192.892981679067] ["Changwat Prachuap Khiri Khan" 11.08333333 99.05275 551 4190.394618376586] ["Kowloon" 22.15002778 114.0024444 2019 4189.967197933639] ["Kaliningrad" 54.035 20 434 4184.105886656336] ["Aidin (A?din)" 37.00272222 27.00136111 1009 4174.8058586709] ["Hegang" 47.05 130.0333889 743 4172.9336190101085] ["Shanghai" 31.00222222 121.0673333 14608 4153.872834911298] ["Warsaw" 52.08333333 21 1651 4146.742625923425] ["Cluj" 46.10002778 23.1 692 4133.163110743754] ["Jiaxing" 30.08505556 120.0674444 466 4127.433663549375] ["Izmir" 38.06830556 27.00002778 2501 4125.981357522726] ["Colombo" 6.084722222 79.00058333 648 4123.79117598959] ["Zhuhai" 22.10188889 113.0668889 501 4123.177126314622] ["Hangzhou" 30.08586111 120.0001111 1878 4121.9435346323] ["Jiangmen" 22.06941667 113.0024444 532 4120.820739800706] ["Changwat Surin" 14.15002778 103.0833889 1491 4119.029527974892] ["Changwat Chachoengsao" 13.01666667 101.0024444 669 4106.431333570374] ["Changwat Yasothon" 15.11752778 104.0017778 543 4085.307826098234] ["Pyongyang" 39.00022222 125.0855556 3222 4073.397398255635] ["Wuxi" 31.06886111 120.119 1108 4073.1374974872715] ["Bor Sa`id" 31.10002778 32.11666667 538 4071.12585799561] ["Suzhou" 31.13361111 120.1168889 1343 4069.181927003054] ["Haikou" 20.00136111 110.0003333 615 4063.619274264019] ["Changwat Chon Buri" 13.03336111 100.1357778 1289 4057.3440854424284] ["Changwat Nakhon Rat Sima" 14.13336111 102.0000556 2604 4057.1530993285774] ["Guangzhou" 23.00002778 113.0833333 3152 4056.5283643433368] ["Foshan" 23.00275 113.0000556 627 4050.0294066636616] ["Changwat Samut Prakan" 13.08333333 100.0833333 1041 4049.691935861863] ["Bangkok" 13.08333333 100.0167222 5104 4046.0900747109717] ["Changwat Nonthaburi" 13.15275 100.1357778 1045 4045.8513252353664] ["Yunfu" 22.08608333 112.0024444 2612 4044.8726662243625] ["Nagara Pathom" 13.15002778 100 790 4038.7596551125052] ["Nantong" 32.00252778 120.0333333 666 4012.3943371523983] ["Bejraburi" 13 99.11666667 499 4006.184796994524] ["Changwat Rat Buri" 13.01941667 99.11666667 883 4004.297018213849] ["Jilin" 43.01691667 126.0516667 1881 3995.5061296956965] ["Lvov" 49.15275 24 830 3991.9945459924543] ["Changzhou" 31.10275 119.1333889 949 3991.364449198878] ["Sultanah" 24 39.06941667 946 3988.457013441929] ["Zhanjiang" 21.01666667 110.0357778 637 3984.4489587132484] ["Maoming" 21.13333333 110.0666667 473 3977.3802592375573] ["Medina" 24.13333333 39.10030556 1300 3976.3217677738753] ["Antalya" 36.06805556 30.01747222 758 3975.8669639301647] ["Adalia" 36.06805556 30.01747222 758 3975.8669639301647] ["Bucuresti" 44.08608333 26 1877 3974.6252296870484] ["Shaoguan" 24.13333333 113.0691111 628 3971.442542497098] ["Changwat Chaiyaphum" 15.13333333 102.0024444 1185 3963.8220131885137] ["Changwat Phra Nakhon Si Ayutthaya" 14 100.0333333 779 3958.938636039417] ["Padumdhani" 14.00002778 100.0191111 767 3958.1556982902025] ["Yancheng" 33.05005556 120 628 3951.369138639736] ["Lobh Buri" 14.13333333 100.1167222 795 3950.770915498627] ["Maha Sarakam" 16.00275 103.1166667 936 3950.366691382269] ["Dandong" 40.00141667 124.0505556 631 3949.5783726907475] ["Dongliao" 42.0675 125.0001667 465 3946.569937761699] ["Changwat Maha Sarakham" 16.00275 103.0500556 936 3946.3067922494106] ["Changwat Suphan Buri" 14.13336111 100.0000556 868 3944.347690954902] ["Changwat Roi Et" 16 103.0000556 1411 3943.5144597672584] ["Gabouk" 28.03608333 36.06941667 455 3942.6596613171137] ["Changwat Kalasin" 16.03336111 103 1084 3940.4615451763684] ["Harbin" 45.08333333 126.15 3229 3938.2660350258434] ["Zhenjiang" 32.03419444 119.1001111 632 3934.931262838853] ["Yangzhou" 32.05275 119.1001667 539 3933.8827547572882] ["Taizhou" 32.15163889 119.0691111 612 3925.7650254515406] ["Hamitabat" 37.08383333 30.05025 550 3925.2717221806793] ["Changchun" 43.03555556 125.1507778 2537 3925.058006113127] ["Helsinki" 60.00061111 24.10002778 558 3923.484174210166] ["Constantinople" 41 28.11747222 11581 3916.0426335862912] ["Istanbul" 41 28.11747222 9797 3916.0426335862912] ["Changwat Nakhon Phanom" 17.03336111 104.0500556 769 3915.0971602230566] ["Changwat Sakon Nakhon" 17.00275 104 1201 3914.6823123270333] ["Riga" 56.11666667 24 742 3914.6668141905334] ["Maanshan" 31.05275 118.1357778 540 3913.6368193811654] ["Wuhu" 31.00002778 118.0333333 507 3908.468880955914] ["Thiruvananthapuram" 8.001388889 76.118 784 3900.9397514952284] ["Tirunelveli" 8.05 77.03333333 435 3896.5614592492825] ["Brusa" 40.01669444 29 2374 3883.9650811992356] ["Bursa" 40.01669444 29 1413 3883.9650811992356] ["Kocaeli" 40.10022222 29.08355556 1350 3874.0238073624064] ["Huaiyin" 33.08583333 119.0001111 555 3868.2499971332322] ["Changwat Nakhon Sawan" 15.00275 100.0000556 1178 3861.4413459631273] ["Nanchang" 28.05 115.0857778 1871 3856.181236144616] ["Nanjing" 32.00058333 118.1002222 3087 3855.8363805224167] ["Vilnius" 54.00275 25.15002778 542 3849.236002151948] ["Eskisehir" 39.10169444 30.01783333 515 3839.6637347013047] ["Yantai" 37.01941667 121.0666667 719 3838.0357891917997] ["Jerusalem" 31.10222222 35.05222222 714 3833.6313141376563] ["Hefei" 31.01666667 117.1004444 1388 3832.1799767248904] ["Amman" 31.1 35.08608333 1275 3831.0300622345476] ["Shenyang" 41.11719444 123.0857778 3512 3830.2852003861176] ["Benxi" 41.11916667 123.0844444 987 3830.1073334944867] ["Fushun" 41.03333333 123.0357778 1400 3829.4186148814474] ["Liaoyang" 41.05111111 123.0004444 687 3825.967387581578] ["Changwat Phetchabun" 16.01666667 101 1151 3822.920939165136] ["Qingdao" 36.00138889 120.0358889 1642 3802.458307083811] ["Dalian" 38.06775 121.1000556 2035 3793.8562450353284] ["Changwat Nong Khai" 17.03444444 102.069 939 3792.437168587448] ["Eiko" 40.00005556 122.05 591 3790.3321015573943] ["Madurai" 9.083333333 78.00002778 909 3785.069262690745] ["Hai Phong" 20.01722222 106.0014444 602 3783.298663529561] ["Yingkou" 40.13336111 122.0024444 591 3781.360721095809] ["Kochi" 9.133333333 76.05275 604 3775.0782107820046] ["Bengbu" 32.10191667 117.0193333 576 3762.580759898001] ["Zhuzhou" 27.01666667 113.0024444 709 3761.6491494622055] ["Changwat Phichit" 16.08608333 100.0333889 614 3760.829309168343] ["Anshan" 41.00138889 122.1511111 1199 3760.5344482234095] ["Konia" 37.01838889 32.13527778 2450 3759.7386832438006] ["Konya" 37.01838889 32.13527778 876 3759.7386832438006] ["Hengyang" 26.052 112.1011111 759 3758.957025916839] ["Nanning" 22.15002778 108.1500556 803 3758.2326971010298] ["Changwat Phitsanulok" 16.15275 100.0833333 971 3757.3976755904414] ["Panshan" 41.01866667 122.0017778 625 3748.0672739574316] ["Chisinau" 47.00005556 28.01861111 713 3744.1872701058396] ["Minsk" 53.05 27.06669444 1742 3728.1249304488347] ["Beirut" 33.03577778 35.00136111 1252 3727.5648616644553] ["Changwat Loei" 17.08608333 101.0500556 676 3726.617931397132] ["Leui" 17.13608333 101.0500556 676 3722.0039912814213] ["Changwat Tak" 16.03336111 99.00275 540 3708.0702714908493] ["Gampheang Phet" 16.13336111 99 912 3698.401951198006] ["Changsha" 28.00141667 113.0001111 2073 3694.8567420587624] ["Huainan" 32.11805556 116.1525556 1027 3691.5794787833893] ["Ankara" 39.08552778 32.01716667 3519 3679.9234466352555] ["Guilin" 25.10275 110.1024444 649 3675.1453499978015] ["Liuzhou" 24.13472222 109.0501111 763 3669.0631591173383] ["Tiruchchirappalli" 10.13555556 78.01672222 775 3668.258876925853] ["Qiqihar" 47.00191667 123.1333889 882 3663.669829303862] ["Changwat Uttaradit" 17.11722222 100.0001667 511 3662.2670078156802] ["Coimbatore" 10.15083333 76.11694444 959 3661.9320948459413] ["Xuzhou" 34.10022222 117.017 1199 3652.9549425287996] ["Wuhan" 30.06941667 114.1000556 4184 3648.7284150766754] ["Fuxin" 42.00172222 121.1506667 689 3646.495170704988] ["Mersin" 36.05225 34.13586111 612 3642.7614922150683] ["Damascus" 33 36.11666667 1576 3639.167360227926] ["Al-sham" 33 36.11666667 1569 3639.167360227926] ["Ha Noi" 21.00275 105 1431 3632.208368713893] ["Zibo" 36.11838889 118.0018889 669 3631.846830463553] ["Huaibei" 33.1355 116.117 903 3631.7425969736582] ["Yueyang" 29.00191667 113.0026667 528 3629.2666040661934] ["Changwat Sukhothai" 17.00083333 99.15108333 665 3624.693559412382] ["Shaoyang" 27.002 111.0855556 649 3613.902778860002] ["Odesa" 46.13336111 30.05275 1001 3610.9464896988466] ["Changwat Sawankhalok" 17.13361111 99.00002778 665 3603.6620831351606] ["Mawlamyine" 16.1525 97.11727778 438 3595.246701831921] ["Qinhuangdao" 39.08447222 119.0852222 759 3589.0359883320975] ["Hims" 34.05275 36.05002778 775 3587.7975739804247] ["Changwat Nan" 18.01666667 100.0333333 530 3580.6542500042906] ["Saint Petersburg" 59.05272222 30.08363889 4039 3575.9673186301857] ["Calicut" 11.08333333 75.10002778 439 3559.5989056608264] ["Selam" 11.15 78.00002778 778 3555.4894805854115] ["Taian" 36.01669444 117.0005556 750 3555.4165987313513] ["Kiev" 50.08608333 30.01669444 2514 3548.461911709249] ["Dagon" 16.10275 96.00002778 4477 3542.807126633101] ["Hamah" 35.00275 36.08333333 460 3536.1318143948556] ["Jining" 35.06888889 116.0671111 450 3526.0747902783864] ["Gomel" 52.10002778 30.13608333 481 3525.4959441932574] ["Xinyang" 32.00136111 114.0005556 1590 3524.7189895834995] ["Adana" 37.00002778 35.15111111 1249 3516.2447501240663] ["Changwat Lampang" 18.11775 99.00163889 823 3511.3774251693612] ["Jinan" 36.00025 116.1525556 2069 3487.3453273778523] ["Shashi" 30.13497222 112.0672222 498 3482.8637464772087] ["Changde" 29.00163889 111.0002222 517 3471.654751100089] ["Kaisaria" 38.05163889 35.15002778 1091 3470.1646891933538] ["Kayseri" 38.05163889 35.15002778 593 3470.1646891933538] ["Caesarea" 38.05163889 35.15002778 592 3470.1646891933538] ["Nikolaev" 46.13336111 32 510 3463.7138752262645] ["Chengde" 40.10086111 118.0005556 449 3462.6052863128707] ["Changwat Chiang Mai" 18.11808333 98.13447222 1763 3462.224943459723] ["Riyadh" 24.13525 46.10058333 3469 3456.236651896375] ["Bangalore" 12.13608333 77.06941667 4931 3442.40486653716] ["Puyang" 35.03336111 115.0022222 666 3441.4049220719407] ["Maisuru" 12.13497222 76.13580556 868 3441.306098270307] ["Tanggu" 39.00166667 117.1358889 535 3435.2965530186093] ["Changwat Chiang Rai" 19.03608333 99.08333333 1494 3430.756023650201] ["Tianjin" 39.00052778 117.002 3766 3424.540026911005] ["Kaifeng" 34.06919444 114.0834444 576 3416.6928860331923] ["Yichang" 30.03383333 111.1166667 476 3414.016633448] ["Aleppo" 36.03336111 37.00027778 2139 3411.090229028393] ["Alep" 36.03336111 37.00027778 1602 3411.090229028393] ["Pingdingshan" 33.06858333 113.1337778 889 3394.2413936262233] ["Cangzhou" 38.15002778 116.0333889 527 3381.024416095296] ["Kryvyy Rih" 47.08336111 33.01666667 652 3369.579845361417] ["Madras" 13.00275 80.10275 4328 3366.6302276527913] ["Xiangfan" 32.00002778 112.0005556 462 3364.173468661129] ["Gaziantep" 37.00105556 37.03527778 1066 3363.3205609966117] ["Hengshui" 37.05163889 115.0335 456 3347.685996779015] ["Langfang" 39.00136111 116.0172222 720 3345.0095979012685] ["Xuchang" 34.00002778 113.1500556 449 3344.80544902996] ["Beijing Shi" 39.08444444 116.0518889 14933 3344.5342327899234] ["Peking" 39.08444444 116.0518889 7480 3344.5342327899234] ["Cheng" 34.08558333 113.1351111 2014 3339.045433838454] ["Zhengzhou" 34.01666667 113.0191111 2014 3333.325371048467] ["Anyang" 36.00216667 114.1512222 781 3324.724098779943] ["Baoding" 38.01666667 115.1511111 995 3315.166375798359] ["Handan" 36.06669444 114.0191111 1358 3310.9146506426414] ["Guiyang" 26.06941667 106.0500556 1171 3301.3574559512667] ["Jiaozuo" 35.06747222 113.0524444 517 3281.4904677011264] ["Xingtai" 37.002 114.1523333 611 3278.38159130527] ["Luancheng" 37.03475 114.1500556 597 3276.7236024135727] ["Xinxiang" 35.13388889 113.0333889 743 3276.597884016839] ["Edessa" 37 38.11780556 1684 3275.4831677381317] ["Urfa" 37 38.11780556 449 3275.4831677381317] ["Adiyaman" 37.08419444 38.10052778 678 3273.104943267673] ["Tangshan" 37.15194444 114.0335 2054 3262.014664661086] ["Luoyang" 34.01666667 112.1178889 1390 3260.463871656356] ["Zunyi" 27.03477778 106.1507778 466 3237.035164316767] ["Malatia" 38.01719444 38.13411111 924 3229.864063204793] ["Malatya" 38.01719444 38.13411111 442 3229.864063204793] ["Aleksandrovsk" 47.15002778 35.00275 796 3219.700444416357] ["Elazig" 38.00030556 39.05116667 605 3156.1820619539094] ["Zhangjiakou" 40.135 114.0345556 692 3142.5130785052415] ["Belgaum" 15.03336111 74 428 3125.5332632157374] ["Hubli" 15 75.00002778 840 3124.5412557243258] ["Kharkiv" 50 36.08333333 1430 3116.6536703601164] ["Diyarbakir" 37.08333333 40.03561111 644 3116.0039167076407] ["Taiyuan (Taiyï¿½an)" 37.05188889 112.1348889 2722 3112.309146212636] ["Ad Diwaniyah" 31.15169444 44.08394444 908 3109.638949306669] ["An Najaf" 31.15166667 44.13413889 482 3105.6953153585896] ["Kunming" 25 102.0502222 1023 3099.821798880484] ["Moscow" 55.08358333 37.10172222 10381 3086.6556221866776] ["Chongqing" 29.05169444 106.0502222 3967 3085.5863815316643] ["Dagu" 40.00194444 113.1187778 1052 3073.3792478065925] ["Datong" 40.00002778 113.0858889 1052 3070.7929151371304] ["Tula" 54.03494444 37.1 468 3070.1395938298865] ["Abu Ghurayb" 33.11691667 43.15080556 900 3066.014288914313] ["Vijayawada" 16.01669444 80.11669444 874 3033.5333892318527] ["Ad Dammam" 26.08413889 50.00030556 768 3025.636737486412] ["Guntur" 16.13333333 80.11666667 530 3020.6440735635238] ["Yaroslavl" 57.11669444 39.03336111 606 3016.9291547021116] ["Kolhapur" 16.01666667 74.05002778 516 3016.0672402117316] ["Krasnodar" 45.00225 38.13522222 649 3015.4385306860718] ["Al Kuwait" 29.03358333 47.13386111 2335 3014.785423084456] ["Neijiang" 29.08333333 105.0006667 546 3003.842007285238] ["Baghdad" 33.0025 44.05222222 5672 3000.6242828840923] ["Visakhapatnam" 17.01666667 83.11666667 1063 2973.0701731153886] ["Erzerum" 39.06694444 41.10188889 979 2947.0380012312903] ["Panzhihua" 26.05 101.0524444 461 2946.197160895532] ["Ryazan" 54.11691667 39.06777778 520 2944.3989879172486] ["Zigong" 29.05 104.1024444 689 2938.672956788747] ["Al Basrah Al Qadimah" 30.15116667 47.15 2015 2936.7160788052106] ["Al Basrah" 30.15252778 47.15002778 2600 2936.6221915943047] ["Xian" 34.08441667 108.1018889 3953 2933.438146678399] ["Xianyang" 34 108.0342222 1034 2932.6430057521547] ["Mosul" 36 43 1739 2925.873043620121] ["Al Mawsil Al Jadidah" 36.15141667 43 2065 2918.577103085338] ["Abu Dhabi" 24.13336111 54.03336111 603 2918.4056653635203] ["Rostov-na-donu" 47.06694444 39.03333333 1074 2917.423893309209] ["Lipetsk" 52.11666667 39.06666667 515 2916.272102515682] ["Voronezh" 51.1525 39.00055556 840 2912.839863042723] ["Hohhot" 40.13561111 111.1500556 774 2909.693160527067] ["Hyderabad" 17.03363889 78.1355 3598 2902.879892441383] ["Sholapur" 17.00275 75.08336111 997 2901.6781534351585] ["Kirkuk" 35.13338889 44.05052778 601 2884.2532454462093] ["Gulbarga" 17.15275 76.15275 483 2883.355400731754] ["Chengdu" 30.00002778 104.0000556 3950 2864.5930578389607] ["Baoji" 34.0175 107.0333333 438 2851.582060353118] ["Irbil" 36.01777778 44.00055556 932 2844.029513003387] ["As Sulaymaniyah" 35.05058333 45.10191667 723 2803.890334396599] ["Ahvaz" 31.15141667 48.01888889 854 2803.5778704776158] ["Warangal" 18 79.06941667 557 2802.97036649688] ["Pune" 18.01941667 73.03336111 2935 2802.0668411969277] ["Bombay" 18.13333333 72.15080556 12692 2799.314339269516] ["Pimpri" 18.11669444 73.11666667 1284 2790.491993087383] ["Ash Shariqah" 25.01775 55.05222222 620 2777.33813780965] ["Sharjah" 25.01775 55.05222222 543 2777.33813780965] ["Al Sharjah" 25.01775 55.05222222 543 2777.33813780965] ["Dubayy" 25.08358333 55.10222222 1141 2768.473232135509] ["Dubai" 25.08358333 55.10222222 1137 2768.473232135509] ["Baotou Shi" 40.15025 109.1525556 1301 2747.613936264533] ["Chittagong" 22.01916667 91.13386111 3920 2722.844050435981] ["Orumiyeh" 37.05222222 45.00002778 602 2714.4984229068805] ["Thana" 19.01666667 72.13336111 1486 2702.036145703451] ["Thane" 19.01666667 72.13336111 1261 2702.036145703451] ["Cuttack" 20 85.15275 580 2701.810085305318] ["Kahriz" 34.13361111 47.00088889 766 2701.5621513390734] ["Kermanshah" 34.13363889 47.00111111 766 2701.542928789655] ["Bhubaneswar" 20.05275 85.15275 762 2696.1775296131395] ["Nizhniy Novgorod" 56.15275 44 1284 2695.2158496806273] ["Ulhasnagar" 19.05002778 73 516 2688.3144128371023] ["Kalyan" 19.08333333 73 1262 2684.628470774672] ["Nanded" 19 77.15275 485 2679.7104633089875] ["Bhiwandi" 19.13333333 73.00002778 707 2679.094746663134] ["Yerevan" 40.00055556 44.0025 1093 2678.0492442187683] ["Nasik" 19.13608333 73.11666667 1289 2677.6204653008326] ["Aurangabad" 19.03608333 75.15275 1016 2675.463126792098] ["Shiraz" 29.10111111 52.03552778 1249 2648.4806687773066] ["Tbilisi" 41.05 44.11858333 1049 2634.9491092541107] ["Hamadan" 34.11833333 48.00191667 514 2623.003274309416] ["Azadshahr" 34.11666667 48.03333333 514 2620.610658587709] ["Khulna" 22.13333333 89.03333333 1342 2617.6551043004256] ["Nangi" 22.00275 88.03475 440 2590.329762536637] ["Bhatpara" 22.03527778 88.06722222 483 2588.2660586289435] ["Haora" 22.08363889 88.13530556 1027 2585.9945023448304] ["Rajpur" 22.06805556 88.08338889 444 2585.5378543489883] ["Calcutta" 22.06691667 88.03358333 4631 2583.6894442358384] ["Tabriz" 38.00222222 46.11688889 1424 2582.4460879718476] ["Surat" 20.13336111 72.06666667 2894 2579.7596029054307] ["Yinchuan" 38.13338889 106.1007778 475 2575.7040490133854] ["Dhaka" 23.05088889 90.06694444 6493 2570.9523106946626] ["Malegaon" 20.05 74.01941667 435 2568.666493665319] ["Akola" 20.05275 77 428 2562.215100532116] ["Amravati" 20.08608333 77.08333333 603 2558.7726324118257] ["Amaravati" 20.08608333 77.08333333 603 2558.7726324118257] ["Arak" 34.00005556 49.01666667 503 2549.6599757521085] ["Penza" 53.01802778 45 512 2536.471613046299] ["Volgograd" 48.13525 44.08358333 1010 2534.624741803066] ["Cheboksary" 56.00163889 47.08355556 446 2510.348550837621] ["Esfahan" 32.15136111 51.00194444 1547 2509.9692620653695] ["Jamshedpur" 22.13333333 86.00275 616 2502.432664078812] ["Kirov" 58.08577778 49.15275 457 2500.8455671416827] ["Raipur" 21.05275 81.11941667 680 2493.4243103872345] ["Bhilai" 21.05002778 81.08608333 625 2493.147119396815] ["Bhavnagar" 21.10002778 72 555 2474.1843414993195] ["Nagpur" 21 79 2228 2470.144946597091] ["Qom" 34.13419444 50.03358333 1011 2461.972213413331] ["Ghom" 34.13419444 50.03358333 900 2461.972213413331] ["Durgapur" 23.13608333 87.15002778 518 2439.3273082052583] ["Lanzhou" 36.00083333 103.117 1417 2432.9329200796515] ["Saratov" 51.06669444 46.00275 863 2426.192313821203] ["Naberezhnyye Morkvashi" 55.08505556 48.00166667 509 2418.3930216114773] ["Asansol" 23.00275 86.13608333 504 2415.9480170964707] ["Asanol" 23.00275 86.13608333 504 2415.9480170964707] ["Jamnagar" 22.13336111 70.00002778 492 2397.2237346896227] ["Rajkot" 22.13333333 70.10275 1177 2395.003710292419] ["Rajshahi" 24.03336111 88.08333333 700 2385.1126207484176] ["Rasht" 37.10161111 49.08358333 594 2382.07738184283] ["Ranchi" 23.01666667 85.15275 945 2381.3946449702958] ["Da Huryee (Da Hï¿½ryee)" 47.08336111 106.0833889 844 2379.1674763344004] ["Ulyanovsk" 54.15275 48.05 640 2378.8749090776014] ["Makhachkala" 42.13363889 47.00025 497 2373.2197055993306] ["Yazd" 31.05275 54.03333333 477 2360.672701432361] ["Kazan" 55.08333333 49.00275 1104 2359.426183718912] ["Vadodara" 22.13333333 73.03333333 1409 2346.9261214670564] ["Indore" 22.05002778 75.15275 1837 2340.500038235268] ["Guwahati" 26.00275 91.05275 899 2332.712544491321] ["Tehran" 35.00244444 51.0855 7157 2329.751034458198] ["Karaj" 35.15111111 51.00025 1448 2328.197764296281] ["Irkutsk" 52.10002778 104.1524444 586 2309.8073517161324] ["Karachi" 24.03336111 67 11627 2277.027433151062] ["Tolyatti" 53.01775 49.06805556 718 2274.458773697042] ["Baku" 40.05086111 49.03497222 1116 2268.0119783480923] ["Xining" 36.11669444 101.1000556 767 2266.022226883551] ["Ahmadabad" 23.00275 72.11669444 3719 2263.054348875847] ["Jabalpur" 23.00002778 79.11666667 1030 2250.1971221239505] ["Astrakhan" 46.00216667 48.00197222 502 2239.718507624851] ["Ujjain" 23.00275 75.10002778 457 2234.8250557128745] ["Kerman" 30.11888889 57.00002778 577 2224.308537502019] ["Bhopal" 23.10002778 77.06666667 1600 2223.76619611399] ["Samara" 53.03333333 50 1134 2215.999493116405] ["Shiliguri" 26.03555556 88.08472222 515 2184.3827329169662] ["Naberezhnyye Chelny" 55.08388889 52.08444444 509 2182.254291067489] ["Izhevsk" 56.01666667 53.05275 631 2180.511751089772] ["Perm" 58 56.08333333 982 2163.6850047118132] ["Patna" 25.1 85.00002778 1600 2157.3736362505983] ["New Patna" 25.1 85.00002778 1599 2157.3736362505983] ["Hyderabad" 25.03336111 68.03336111 1386 2138.129314870327] ["Jhapa" 26.13608333 87 729 2127.108123781383] ["Zahedan" 29.15058333 60.03391667 552 2110.818625708113] ["Varanasi" 25.15275 83 1164 2090.1541307465723] ["Dhanukha" 26.15275 86.00275 721 2085.0395144560034] ["Allahabad" 25.1 81 1073 2048.620544862118] ["Kota" 25.00275 75.15275 763 2012.39394848227] ["Gorakhpur" 26.08555556 83.035 674 1991.5211924045448] ["Katmandu" 27.05002778 85.15002778 1264 1960.339660805981] ["Kathmandu" 27.05002778 85.15002778 790 1960.339660805981] ["Lakhnau" 26.01666667 80.08336111 2472 1931.5693707741323] ["Kanpur" 26.13336111 80 2823 1917.3789032189459] ["Ufa" 54.1 56.00138889 1033 1908.8827431421419] ["Jodhpur" 26.11725 73.00222222 921 1907.5786784582256] ["Gwalior" 26.05138889 78.00141667 882 1901.5744330470804] ["Ajmer" 26.1 74.11941667 517 1897.1346402463378] ["Jaipur" 26.08336111 75.15002778 2711 1892.3465289007966] ["Rupandehi" 27.13608333 83.10275 785 1881.9139446946735] ["Orenburgskiy" 51.05 54.08336111 550 1879.136631153241] ["Yekaterinburg" 56.01666667 60.1 1287 1835.5201455753568] ["Krasnoyarsk" 56.00136111 92.11669444 907 1833.5867516388648] ["Orenburg" 51.11691667 55.00138889 550 1821.5808756542772] ["Chkalov" 51.08333333 55.03608333 550 1817.9771126027422] ["Agra" 27.00275 78.00002778 1430 1796.1495806426217] ["Aligarh" 27.03608333 78.00275 753 1792.4802531917867] ["Dang" 28.00002778 82.11666667 506 1761.6065757125928] ["Tyumen" 57.00025 65.01886111 519 1733.5895632060794] ["Chelyabinsk" 55.00161111 61.08525 1062 1712.0555720192817] ["Kailali" 28.06669444 80.10275 713 1707.6903788312238] ["Bikaner" 28.00002778 73.11666667 576 1698.692103266408] ["Bareli" 28.01666667 79.08336111 745 1696.3892972370727] ["Ghaziabad" 28.00002778 77.08608333 1199 1679.4477381690504] ["Delhi" 28.00002778 77.05002778 10928 1679.2829789974717] ["Asgabat" 37.11666667 58.03608333 797 1670.4215227710688] ["Ashgabat" 37.11666667 58.03608333 727 1670.4215227710688] ["Faridabad" 28.08608333 77.15002778 1280 1670.19859482811] ["Moradabad" 28.15275 78.10275 721 1669.7462721400013] ["Meerut" 28.13608333 77.03333333 1223 1664.0954512816168] ["Quetta" 30.01666667 67 733 1663.1652220134365] ["Mashhad" 36.11802778 59.10077778 2307 1646.4649124264204] ["Bahawalpur" 29.05 71.00275 552 1625.8691390467366] ["Gorakhpur" 29.1 75.00275 1324 1558.054485570309] ["Saharanpur" 29.13336111 77.03333333 484 1553.324555277514] ["Tomsk" 56 84.13336111 485 1545.916423306268] ["Kemerovo" 55.15275 86.00275 477 1519.356990913894] ["Multan" 30.01783333 71.13363889 1437 1518.7123920415972] ["Kalat" 32.00005556 66.068 444 1515.3267032550775] ["Ludhiana" 30.05 75 1545 1452.6305328627345] ["Dehra Dun" 30.15002778 78.00275 522 1447.8272045548345] ["Chandigarh" 30.06775 76.11775 914 1447.2688812946813] ["Novosibirsk" 55.00222222 82.10022222 1419 1393.9729254680033] ["Novokuznetsk" 53.08333333 87 539 1371.5313364456215] ["Faisalabad" 31.08336111 73.00275 2507 1362.3482284978827] ["Lahore" 31.03580556 74.00194444 6312 1352.5737017357358] ["Omsk" 55 73.06666667 1129 1343.2606887787572] ["Amritsar" 31.11922222 74.01838889 1092 1343.1740760120474] ["Jalandhar" 31.15061111 75.06808333 785 1330.0814851324697] ["Sargodha" 32 72.00166667 542 1284.2545685395817] ["Sar-e Pol" 35.03411111 66.03583333 727 1246.67938705325] ["Gujranwala" 32 74.00275 1384 1246.3043923482012] ["Sialkot" 32 74.01669444 477 1246.1227295167446] ["Jammu" 32.05275 74.03336111 465 1240.0968715231056] ["Barnaul" 53.01691667 83.08358333 599 1218.5615081611459] ["Kabul" 34.01669444 69.00275 3043 1181.7769783335973] ["Islamabad" 33.03333333 73.00002778 601 1150.103862957722] ["Rawalpindi" 33.1 73.00002778 1743 1142.8755957466283] ["Peshawar" 34.00275 71.06725 1219 1100.5252123990226] ["Srinagar" 34.00052778 74.13358333 975 1024.4950410005708] ["Urumqi (Rï¿½mqi)" 43.11666667 87.06941667 1508 888.6332163429075] ["Djuschambe" 38.05166667 68.10166667 543 877.5671705581634] ["Shihezi" 44.11666667 86.00275 572 803.8147043467222] ["Tashkent" 41.15002778 69.08333333 1978 618.4331130200032] ["Namangan" 40.15086111 71.00027778 432 535.7602913822557] ["Bishkek" 42.03422222 74.10002778 896 202.20378595376562] ["Spetsgorodok" 43.00111111 76.05002778 1204 10.62624999826182]))
;; (spit "/Users/michal/sc/resources/worldhalf1.edn" (with-out-str (pr worldhalf1)))

